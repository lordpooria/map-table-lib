"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("tslib"),t=require("react"),n=require("easy-peasy"),l=require("@material-ui/styles"),r=require("@hesaba/theme-language"),a=require("@material-ui/core"),o=require("clsx"),i=require("@material-ui/lab"),u=require("@material-ui/pickers"),s=require("@date-io/dayjs"),c=require("dayjs"),d=require("jalaliday"),m=require("react-window"),f=require("react-virtualized-auto-sizer");function v(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var p=v(t),h=v(o),g=v(s),y=v(c),b=v(d),E=v(f),S="preperation.filter.operations.",w=function(e){return{commonOperations:[{key:"equals",name:e(S+"equals"),type:"common",valSize:1},{key:"notEquals",name:e(S+"notEquals"),type:"common",valSize:1},{key:"isNull",name:e(S+"isNull"),type:"common"},{key:"isNotNull",name:e(S+"isNotNull"),type:"common"},{key:"isEmpty",name:e(S+"isEmpty"),type:"common"},{key:"isNotEmpty",name:e(S+"isNotEmpty"),type:"common"},{key:"contains",name:e(S+"contains"),type:"common",valSize:1},{key:"notContaines",name:e(S+"notContaines"),type:"common",valSize:1}],stringOptions:[{key:"regex",name:e(S+"regex"),type:"string",valSize:1},{key:"startWith",name:e(S+"startWith"),type:"string",valSize:1},{key:"endWith",name:e(S+"endWith"),type:"string",valSize:1}],numericOptions:[{key:"between",name:e(S+"between"),type:"number",valSize:2}],dateOptions:[{key:"dateFrom",name:e(S+"dateFrom"),type:"date",valSize:1},{key:"dateTo",name:e(S+"dateTo"),type:"date",valSize:1},{key:"between",name:e(S+"between"),type:"date",valSize:2}],mapOptions:[{key:"surrounded",name:e(S+"surrounded"),type:"geographic",valSize:1}]}},x={VTVersion:"1.0.0",settings:{direction:"rtl",lang:"fa"},visibleRows:[],enhancedColumns:[],showFilter:!1,filters:[],toggleSingleRow:n.action((function(e,t){var n=t.index;e.visibleRows[n].selected=!e.visibleRows[n].selected})),toggleAllRows:n.action((function(t,n){var l=n.isSelected;t.visibleRows=t.visibleRows.map((function(t){return e.__assign(e.__assign({},t),{selected:!l})}))})),toggleShowFilter:n.action((function(e,t){if(0===e.filters.length){var n=e.enhancedColumns[0];e.filters.push({id:(new Date).getTime().toString(),column:[{key:n.key,label:n.label,type:n.type}],operation:void 0,value:[void 0]})}e.showFilter=t})),setTableData:n.action((function(e,t){var n=t.enhancedColumns,l=t.visibleRows;e.visibleRows=l,e.enhancedColumns=n})),fakeAppendTableData:n.action((function(t,n){var l=n.rows,r=n.index;t.visibleRows=e.__spreadArrays(t.visibleRows.slice(0,r+1),l,t.visibleRows.slice(r+1))})),toggleVisibleColumns:n.action((function(e,t){var n=t.index;e.enhancedColumns[n].visible=!e.enhancedColumns[n].visible})),setStickyColumn:n.action((function(e,t){var n=t.index;e.enhancedColumns[n].sticky=!e.enhancedColumns[n].sticky})),numRowsSelected:n.computed((function(e){return e.visibleRows.filter((function(e){return e.selected})).length})),selectedRows:n.computed((function(t){return t.visibleRows.reduce((function(t,n,l){return n.selected?e.__spreadArrays(t,[l]):t}),[])})),visibleColumns:n.computed((function(e){return e.enhancedColumns.filter((function(e){return e.visible&&!e.sticky}))})),stickyColumns:n.computed((function(e){return e.enhancedColumns.filter((function(e){return e.visible&&e.sticky}))})),sortTable:n.action((function(e,t){var n=t.index,l=t.sortType,r=t.columnKey;if(e.visibleColumns[n]){var a=e.enhancedColumns.findIndex((function(e){return e.key===r}));-1!==a&&(e.enhancedColumns.map((function(e){return e.sorted=void 0})),e.enhancedColumns[a].sorted=l,e.visibleRows.length>0&&(e.visibleRows="DESC"===l?e.visibleRows.sort((function(e,t){return e[r]<t[r]?1:-1})):e.visibleRows.sort((function(e,t){return e[r]<t[r]?-1:1}))))}else console.warn("column not found something wrong!")})),filterSetColumn:n.action((function(e,t){var n,l=t.filterIndex,r=t.column,a=t.columnIndex,o=e.filters[l];(null===(n=o.operation)||void 0===n?void 0:n.type)!==r.type&&(o.operation=void 0),o.column[a]=r})),filterSetOperation:n.action((function(t,n){var l,r=n.filterIndex,a=n.operation;t.filters[r].operation=a;var o=null===(l=t.filters[r].column[0])||void 0===l?void 0:l.type;t.filters[r].value=function(t,n){return n.valSize?e.__spreadArrays(new Array(n.valSize).fill("date"===t?(new Date).toISOString():"number"===t?0:"geographic"===t?void 0:"")):[]}(o,a)})),filterSetValue:n.action((function(e,t){var n=t.filterIndex,l=t.value,r=t.valueIndex;e.filters[n].value[r]=l})),filterAdd:n.action((function(e,t){var n=t.columnKey;e.showFilter=!0;var l=e.enhancedColumns.filter((function(e){return e.key===n}));l&&0!==l.length&&e.filters.push({id:(new Date).getTime().toString(),column:[{key:l[0].key,label:l[0].label,type:l[0].type}],operation:void 0,value:[void 0]})})),filterDelete:n.action((function(e,t){var n,l=t.index;null===(n=e.filters)||void 0===n||n.splice(l,1)}))},C=n.createStore(x),_=function(e){var t=e.children,n=r.useThemeObject();return p.default.createElement(l.StylesProvider,{injectFirst:!0},p.default.createElement(l.ThemeProvider,{theme:n},t))},k={currentWidths:{},totalWidth:0,setSizes:n.action((function(e,t){var n=t.totalWidth,l=t.currentWidths;e.currentWidths=l,e.totalWidth=n})),setCurrentWidth:n.action((function(e,t){var n=t.currentWidths;e.currentWidths=n})),setTotalWidth:n.action((function(e,t){var n=t.totalWidth;e.totalWidth=n}))},R=t.createContext({}),T=t.createContext({});function I(e){var t=e.children,l=n.useLocalStore((function(){return k})),r=l[0],a=l[1];return p.default.createElement(T.Provider,{value:{state:r}},p.default.createElement(R.Provider,{value:{actions:a}},t))}function L(){var e=t.useContext(T).state;if(!e)throw Error("use state inside provider");return e}function A(){var e=t.useContext(R).actions;if(!e)throw Error("use state inside provider");return e}var N=t.createContext({}),P=t.createContext({});function W(e){var n=e.children,l=t.useState({activeRow:-1}),r=l[0],a=l[1],o=t.useCallback((function(e){a({activeRow:e})}),[]);return p.default.createElement(P.Provider,{value:r},p.default.createElement(N.Provider,{value:o},n))}function F(){var e=t.useContext(P);if(!e)throw Error("use state inside provider");return e}var V=function(e){var t,l=e.children,r=n.useStore();return(null===(t=null==r?void 0:r.getState())||void 0===t?void 0:t.VTVersion)?p.default.createElement(p.default.Fragment,null,l):p.default.createElement(I,null,p.default.createElement(W,null,p.default.createElement(n.StoreProvider,{store:C},l)))},z=function(e){var t=e.children,n=e.direction,l=e.language,a=e.theme;return p.default.createElement(r.StyleProvider,{language:l,direction:n,theme:a},p.default.createElement(_,null,t))},H=50,O=function(){var e=t.useRef(),n=t.useRef(),l=t.useRef(),a=r.useLanguageState().direction,o=t.useRef(a),i=t.useRef({}),u=t.useRef(0),s=t.useRef(),c=A().setSizes,d=t.useRef(),m=t.useMemo((function(){var t=function(t){var o;!function(){var e,t;n.current=null===(e=d.current)||void 0===e?void 0:e.querySelectorAll(".HESABA_TABLE_HEADER_CLASS"),l.current=null===(t=d.current)||void 0===t?void 0:t.querySelectorAll(".HESABA_TABLE_ROW_CLASS")}();var i=t.target;if(i.classList.contains("HESABA_DRAG_HANDLER")){var u=i.previousElementSibling;u&&(s.current=u.getAttribute("data-field"),window.addEventListener("mousemove",r),window.addEventListener("mouseup",a),e.current=null===(o=d.current)||void 0===o?void 0:o.querySelectorAll('[data-field="'+s.current+'"]'))}},r=function(t){if(e.current&&0!==e.current.length&&n.current&&0!==n.current.length&&d&&l.current){var r=24;if("rtl"===o.current){var a=e.current[0].getBoundingClientRect().right;r=Math.max(-t.clientX+a,24)}else{var i=e.current[0].getBoundingClientRect().left;r=Math.max(t.clientX-i,24)}var s=0;n.current.forEach((function(e){return s+=e.getBoundingClientRect().width+24})),u.current=s,e.current.forEach((function(e,t){0===t?(e.style.width=r+"px",e.style.minWidth=r+"px",e.style.maxWidth=r+"px"):(e.style.width=r+24+"px",e.style.minWidth=r+24+"px",e.style.maxWidth=r+24+"px")}))}},a=function t(n){window.removeEventListener("mousemove",r),window.removeEventListener("mouseup",t),s.current&&e.current&&0!==e.current.length&&("rtl"===o.current?i.current[s.current]=-n.clientX+e.current[0].getBoundingClientRect().right:i.current[s.current]=n.clientX-e.current[0].getBoundingClientRect().left,c({totalWidth:u.current,currentWidths:i.current}))};return[function(e){e&&(d.current=e,d.current.addEventListener("mousedown",t))},function(e){e.removeEventListener("mousedown",t)}]}),[]),f=m[0],v=m[1];return t.useEffect((function(){return function(){d.current&&v(d.current)}}),[v]),t.useEffect((function(){o.current=a}),[a]),{setTableRef:f,tableRef:d}},B=n.createTypedHooks(),M=B.useStoreActions,D=B.useStoreDispatch,q=B.useStoreState,K=B.useStore;function j(t){return t.map((function(t){var n,l;return e.__assign(e.__assign({},t),((n={})["data-field"]="HESABA_DATA_FIELD-"+t.key,n.visible=!0,n.sticky=!1,n.sorted=void 0,n.type=null!==(l=null==t?void 0:t.type)&&void 0!==l?l:"string",n))}))}function Z(t){return t.map((function(t,n){return e.__assign({id:n,selected:!1},t)}))}function X(e,t){return{enhancedColumns:j(e),visibleRows:Z(t)}}var G=a.makeStyles((function(e){return a.createStyles({root:{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,fontSize:24,transition:e.transitions.create("fill",{duration:e.transitions.duration.shorter})}})})),U=t.memo((function(t){var n=t.className,l=t.id,r=t.children,a=e.__rest(t,["className","id","children"]),o=G();return p.default.createElement("svg",e.__assign({className:h.default(o.root,n),id:l,width:"24",height:"24",viewBox:"0 0 24 24"},a),r)})),Y=function(e){var t=e.className;return p.default.createElement(U,{className:t,id:"mdi-dots-vertical"},p.default.createElement("path",{d:"M12,16A2,2 0 0,1 14,18A2,2 0 0,1 12,20A2,2 0 0,1 10,18A2,2 0 0,1 12,16M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10M12,4A2,2 0 0,1 14,6A2,2 0 0,1 12,8A2,2 0 0,1 10,6A2,2 0 0,1 12,4Z"}))},J=a.makeStyles((function(e){return a.createStyles({toolbarContainer:{borderBottom:"solid "+e.palette.grey[300]+" 1px",display:"flex",alignItems:"center"},tools:{display:"flex",alignItems:"center",flex:1},title:{padding:"0 "+e.spacing(1)},icon:{fill:e.palette.secondary.main}})})),Q=function(t){var n=t.title,l=t.height,r=t.classes,o=e.__rest(t,["title","height","classes"]),i=J();return p.default.createElement("div",{style:{height:l||70},className:h.default(i.toolbarContainer,null==r?void 0:r.root)},p.default.createElement("div",{className:h.default(i.tools)},p.default.createElement($,{classes:r}),o.operationOnRows&&p.default.createElement(ee,e.__assign({},o))),p.default.createElement(a.Typography,{align:"center",className:i.title},null!=n?n:""))};function $(e){var n,l=e.classes,r=t.useState(null),o=r[0],i=r[1],u=Boolean(o),s=q((function(e){return e.enhancedColumns})),c=J(),d=function(){i(null)},m=M((function(e){return e.toggleVisibleColumns})),f=M((function(e){return e.toggleShowFilter}));return p.default.createElement(p.default.Fragment,null,p.default.createElement(a.IconButton,{onClick:function(e){i(e.currentTarget)},className:null==l?void 0:l.iconButton},p.default.createElement(Y,{className:h.default((n={},n[c.icon]=!(null==l?void 0:l.icon),n),null==l?void 0:l.icon)})),p.default.createElement(a.Menu,{disableScrollLock:!0,id:"long-menu",anchorEl:o,keepMounted:!0,open:u,onClose:d,className:null==l?void 0:l.menu},p.default.createElement(a.MenuItem,{className:null==l?void 0:l.menuItem,onClick:function(){f(!0),d()}},"filter"),null==s?void 0:s.map((function(e,t){return p.default.createElement(a.MenuItem,{key:e.key,className:null==l?void 0:l.menuItem},p.default.createElement(a.FormControlLabel,{control:p.default.createElement(a.Switch,{checked:e.visible,onChange:function(){return m({index:t})},name:e.label}),label:e.label}))}))))}function ee(e){var t=e.operationOnRows,n=q((function(e){return e.numRowsSelected}));return p.default.createElement(p.default.Fragment,null,t&&n>0&&t.map((function(e,t){return p.default.createElement(e,{key:t})})))}function te(e){var t=e.filterIndex,n=e.valIndex,l=e.onSetFilter,r=e.value,o=e.label,i=e.classes;return p.default.createElement(a.TextField,{classes:{root:h.default(null==i?void 0:i.root,null==i?void 0:i.input)},key:"number-"+n,value:r,onChange:function(e){e.target.value&&l(t,n,e.target.value)},type:"number",label:o,variant:"standard"})}function ne(e){var t=e.filterIndex,n=e.valIndex,l=e.onSetFilter,r=e.value,o=e.classes,i=e.label;return p.default.createElement(a.TextField,{classes:{root:h.default(null==o?void 0:o.root,null==o?void 0:o.input)},key:"string-"+n,value:r,onChange:function(e){return function(n){n.target.value&&l(t,e,n.target.value)}}(n),label:i,variant:"standard"})}y.default.extend(b.default);var le=function(e){var t=e.children;return p.default.createElement(u.MuiPickersUtilsProvider,{utils:g.default,locale:"fa"},t)},re=function(e){var t=e.filterIndex,n=e.valIndex,l=e.onSetFilter,r=e.value,a=e.classes,o=e.label;return p.default.createElement(le,null,p.default.createElement(u.DatePicker,{disableToolbar:!0,variant:"inline",format:"MM/dd/yyyy",margin:"normal",id:"date-picker-inline",value:r,className:null==a?void 0:a.root,key:"date-"+n,onChange:function(e){e&&l(t,n,e.toISOString())},label:o,inputVariant:"standard",InputProps:{classes:{root:null==a?void 0:a.input}},animateYearScrolling:!0}))},ae=a.makeStyles((function(){return a.createStyles({input:{borderColor:"transparent"}})})),oe=t.memo((function(n){var l=n.value,r=n.filterIndex,o=n.columns,u=n.columnIndex,s=n.classes,c=ae(),d=t.useState(""),m=d[0],f=d[1],v=M((function(e){return e.filterSetColumn}));return p.default.createElement(i.Autocomplete,{value:l,onChange:function(e,t){t&&"string"!=typeof t&&v({column:t,columnIndex:u,filterIndex:r})},freeSolo:!0,inputValue:m,onInputChange:function(e,t){f(t)},options:o,className:h.default(c.input,null==s?void 0:s.root),getOptionLabel:function(e){return e?e.label:""},getOptionSelected:function(e,t){return!(null==e?void 0:e.label)||e.label===t.label},renderInput:function(t){return p.default.createElement(a.TextField,e.__assign({},t,{classes:{root:null==s?void 0:s.input},label:"column",variant:"standard"}))}})})),ie=t.memo((function(n){var l=n.operation,r=n.filterIndex,o=n.columnType,u=n.classes,s=function(e){return e},c=ae(),d=M((function(e){return e.filterSetOperation})),m=t.useState(w(s).commonOperations),f=m[0],v=m[1],g=t.useState(""),y=g[0],b=g[1],E=t.useRef("");return t.useEffect((function(){if(o&&E.current!==o&&o)switch(E.current=o,o){case"geographic":v(e.__spreadArrays(w(s).mapOptions));break;case"number":v(e.__spreadArrays(w(s).commonOperations,w(s).numericOptions));break;case"string":v(e.__spreadArrays(w(s).commonOperations,w(s).stringOptions));break;case"date":v(e.__spreadArrays(w(s).commonOperations,w(s).dateOptions));break;default:v(w(s).commonOperations)}}),[o,s]),p.default.createElement(i.Autocomplete,{autoComplete:!0,value:l,onChange:function(e,t){t&&"string"!=typeof t&&d({operation:t,filterIndex:r})},freeSolo:!0,inputValue:y,onInputChange:function(e,t){b(t)},options:f,className:h.default(c.input,null==u?void 0:u.root),getOptionLabel:function(e){var t;return null!==(t=null==e?void 0:e.name)&&void 0!==t?t:""},getOptionSelected:function(e,t){return!!(null==e?void 0:e.name)||e.name===t.name},renderInput:function(t){return p.default.createElement("div",{style:{display:"flex",alignItems:"center"}},p.default.createElement(a.TextField,e.__assign({},t,{classes:{root:null==u?void 0:u.input},label:"op",InputProps:e.__assign({},t.InputProps),variant:"standard"})))}})})),ue=t.memo((function(e){var t=e.filterIndex,n=e.val,l=e.valIndex,r=e.columnType,a=e.label,o=e.classes,i=M((function(e){return e.filterSetValue})),u=void 0;return u="date"===r?re:"number"===r?te:ne,p.default.createElement(u,{filterIndex:t,valIndex:l,onSetFilter:function(e,t,n){i({filterIndex:e,valueIndex:t,value:n})},value:n,label:a,classes:o})})),se=function(e){var t=e.className;return p.default.createElement(U,{className:t,id:"mdi-trash-can-outline"},p.default.createElement("path",{d:"M9,3V4H4V6H5V19A2,2 0 0,0 7,21H17A2,2 0 0,0 19,19V6H20V4H15V3H9M7,6H17V19H7V6M9,8V17H11V8H9M13,8V17H15V8H13Z"})," ")},ce=a.makeStyles((function(e){return a.createStyles({deleteButton:{},inputs:{width:150},autoComplete:{margin:e.spacing(1)}})})),de=function(e){var t,n,l=e.filter,r=e.columns,o=e.index,i=ce(),u=M((function(e){return e.filterDelete}));return(null===(t=null==l?void 0:l.column)||void 0===t?void 0:t.length)?p.default.createElement(p.default.Fragment,null,p.default.createElement(a.IconButton,{size:"small",className:i.deleteButton,onClick:function(){return u({index:o})}},p.default.createElement(se,null)),null==l?void 0:l.column.map((function(e,t){var n;return p.default.createElement(oe,{key:(null===(n=null==l?void 0:l.column[0])||void 0===n?void 0:n.type)+"-"+t,filterIndex:o,value:e,columnIndex:t,columns:r,classes:{root:i.autoComplete,input:i.inputs}})})),p.default.createElement(ie,{columnType:null===(n=null==l?void 0:l.column[0])||void 0===n?void 0:n.type,filterIndex:o,operation:l.operation,classes:{root:i.autoComplete,input:i.inputs}}),l.value.map((function(e,t){var n,r;return p.default.createElement(ue,{key:(null===(n=null==l?void 0:l.column[0])||void 0===n?void 0:n.type)+"-"+t,filterIndex:o,valIndex:t,val:e,columnType:null===(r=null==l?void 0:l.column[0])||void 0===r?void 0:r.type,label:"value",classes:{root:i.autoComplete,input:i.inputs}})}))):null},me=function(e){var t=e.className;return p.default.createElement(U,{className:t,id:"mdi-close"},p.default.createElement("path",{d:"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"})," ")},fe=a.makeStyles((function(e){return a.createStyles({rootFilter:{position:"absolute",backgroundColor:"#FFF",padding:e.spacing(1),top:20,left:20,boxShadow:e.shadows[2]},filterWrapper:{display:"flex",alignItems:"center"}})})),ve=function(e){var t=fe(),n=q((function(e){return e.showFilter})),l=M((function(e){return e.toggleShowFilter})),r=q((function(e){return e.filters}));return n?p.default.createElement("div",{className:t.rootFilter},p.default.createElement(a.IconButton,{size:"small",onClick:function(){l(!1)},style:{float:"right"}},p.default.createElement(me,null)),r.map((function(e,n){return p.default.createElement("div",{key:e.id,className:t.filterWrapper},p.default.createElement(de,{filter:e,index:n,columns:[]}))})),p.default.createElement("div",{style:{width:"100%"}})):null},pe=function(e,n){var l=L().totalWidth;return t.useCallback((function(){if(l)return l>n?l:n;var t=e.reduce((function(e,t){return e+((null==t?void 0:t.minWidth)||124)}),48);return t>n?t:n}),[e,n,l])};function he(e,t){return t||e}var ge=a.makeStyles((function(e){return a.createStyles({vtContainerRoot:{width:"100%"},commonVTContainer:{border:"solid 1px "+e.palette.grey[300]}})})),ye=function(e){var t=e.children,n=e.classes,l=e.width,a=ge(),o=r.useLanguageState().direction;return p.default.createElement("div",{className:h.default(he(a.commonVTContainer,null==n?void 0:n.root),a.vtContainerRoot),style:{width:l,direction:o}},t)},be=function(e){return p.default.createElement("div",{style:{position:"absolute",pointerEvents:"none",right:0,left:0,top:0,bottom:0,overflow:"hidden"}})};function Ee(e){return(Ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Se=a.makeStyles((function(){return a.createStyles({rowCell:{},simpleCell:{fontFamily:"inherit"}})})),we=function(e){var t=e.value,n=e.className,l=Se();return p.default.createElement(a.Typography,{align:"center",className:h.default(l.simpleCell,n)},t)},xe=function(t){var n,l=t.label,r=t.minWidth,a=void 0===r?100:r,o=t.colKey,i=t.CellComponent,u=void 0===i?we:i;t.HeaderComponent,t.visible,t.sorted;var s=t.row,c=t.rowIndex;t.colIndex,t.columnsLength;var d=t.classes;t.sticky,t.custom,t.isScrolling;var m=e.__rest(t,["label","minWidth","colKey","CellComponent","HeaderComponent","visible","sorted","row","rowIndex","colIndex","columnsLength","classes","sticky","custom","isScrolling"]),f=Se(),v=L().currentWidths,g=v[m["data-field"]]?v[m["data-field"]]+24:a+24,y="object"===Ee(s[o])?null===(n=s[o])||void 0===n?void 0:n.value:s[o];return p.default.createElement("div",e.__assign({},m,{key:o,style:{minWidth:g||a,width:g||a,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"normal"},className:h.default(f.rowCell,null==d?void 0:d.root)}),p.default.createElement(u,{label:l,index:c,rowKey:c,row:s,value:y,className:null==d?void 0:d.simpleCell}))},Ce=a.makeStyles((function(){return a.createStyles({tableCell:{overflow:"hidden",display:"flex",height:"100%",alignItems:"center",justifyContent:"center","& >button":{opacity:0},"&:hover >button":{opacity:1}},checkbox:{width:48,height:48}})})),_e=a.makeStyles((function(e){return a.createStyles({evenRow:{backgroundColor:"#f8f8f0"},oddRow:{},tableRow:{display:"flex",alignItems:"center",overflow:"hidden",marginTop:H},tableRowCommon:{borderBottom:"solid "+e.palette.grey[300]+" 1px","&:hover":{backgroundColor:"rgba(0,0,0,0.1)"}},rowCell:{},selected:{backgroundColor:"rgba(100,100,255,0.1)"},activatedRow:{backgroundColor:"rgba(255,100,255,0.1)"}})}));function ke(t){return p.default.createElement(p.default.Fragment,null,p.default.createElement(Re,e.__assign({},t)))}var Re=function(n){var l,r,o,i,u=n.style,s=n.rowIndex,c=n.selectable,d=n.classes,m=n.width,f=n.CheckboxProps,v=n.onRowClick,g=n.extraStyles,y=n.selectedRowStyle,b=e.__rest(n,["style","rowIndex","selectable","classes","width","CheckboxProps","onRowClick","extraStyles","selectedRowStyle"]),E=_e(),S=Ce(),w=q((function(e){return e.visibleColumns})),x=q((function(e){return e.visibleRows})),C=M((function(e){return e.toggleSingleRow})),_=pe(w,m),k=F().activeRow,R=t.useCallback((function(){v&&v(s)}),[v]);return p.default.createElement("div",{style:e.__assign(e.__assign(e.__assign(e.__assign({},u),g),k===s&&y),{width:_()}),className:h.default("HESABA_TABLE_ROW_CLASS",E.tableRow,he(E.tableRowCommon,null==d?void 0:d.root),(l={},l[E.selected]=x[s].selected,l),(r={},r[E.activatedRow]=k===s,r),(o={},o[(null==d?void 0:d.evenRow)||"tempEvenRow"]=(null==d?void 0:d.evenRow)&&s%2==0,o),(i={},i[(null==d?void 0:d.oddRow)||"tempOddRow"]=(null==d?void 0:d.oddRow)&&s%2!=0,i)),onClick:R},c&&p.default.createElement(a.Checkbox,e.__assign({checked:x[s].selected,onChange:function(){C({index:s})},color:"primary",classes:{root:S.checkbox},onClick:function(e){return e.stopPropagation()}},f)),w.map((function(n,l){return p.default.createElement(t.Fragment,{key:n.key},p.default.createElement(xe,e.__assign({},n,b,{colIndex:l,row:x[s],rowIndex:s,columnsLength:w.length,colKey:n.key})))})))},Te=function(e){var t=e.className;return p.default.createElement(U,{className:t,id:"mdi-arrow-down"},p.default.createElement("path",{d:"M11,4H13V16L18.5,10.5L19.92,11.92L12,19.84L4.08,11.92L5.5,10.5L11,16V4Z"}))},Ie=function(e){var t=e.className;return p.default.createElement(U,{className:t,id:"mdi-arrow-up"},p.default.createElement("path",{d:"M13,20H11V8L5.5,13.5L4.08,12.08L12,4.16L19.92,12.08L18.5,13.5L13,8V20Z"}))},Le=a.withStyles((function(){return{root:{margin:4}}}))(r.SmallIconButton),Ae=a.makeStyles((function(){return a.createStyles({icons:{width:14,height:14}})})),Ne="Sort ASC",Pe="Sort DESC",We="Hide Column",Fe="Filter",Ve=function(e){var n=e.index,l=e.sortable,r=e.columnKey,o=e.sorted,i=Ae(),u=t.useState(null),s=u[0],c=u[1],d=Boolean(s),m=M((function(e){return e.sortTable})),f=M((function(e){return e.filterAdd})),v=M((function(e){return e.toggleVisibleColumns})),h=function(){return m({index:n,sortType:"DESC",columnKey:r})},g=function(){return m({index:n,sortType:"ASC",columnKey:r})};return p.default.createElement(p.default.Fragment,null,l&&"DESC"===o&&p.default.createElement(Le,{onClick:g},p.default.createElement(Ie,{className:i.icons})),l&&"ASC"===o&&p.default.createElement(Le,{onClick:h},p.default.createElement(Te,{className:i.icons})),p.default.createElement(Le,{onClick:function(e){c(e.currentTarget)}},p.default.createElement(Y,{className:i.icons})),p.default.createElement(a.Menu,{disableScrollLock:!0,id:"long-menu",anchorEl:s,keepMounted:!0,open:d,onClose:function(){c(null)},PaperProps:{style:{}}},l&&p.default.createElement(a.MenuItem,{onClick:g},Ne),l&&p.default.createElement(a.MenuItem,{onClick:h},Pe),p.default.createElement(a.MenuItem,{onClick:function(){return v({index:n})}},We),p.default.createElement(a.MenuItem,{onClick:function(){f({columnKey:r})}},Fe)))},ze=function(t){var n=t.className,l=e.__rest(t,["className"]);return p.default.createElement(U,e.__assign({className:n,id:"mdi-dots-vertical"},l),p.default.createElement("path",{d:"M11 24V5h2v24z"}))},He=a.makeStyles((function(e){return a.createStyles({columnContainer:{display:"flex",top:0,left:0,position:"sticky",zIndex:2,backgroundColor:"rgba(255,255,255,0.8)",alignItems:"center",borderBottom:"solid "+e.palette.grey[300]+" 1px"},titleText:{flex:1,fontFamily:"inherit"},dividerIcon:{pointerEvents:"none",display:"inline-block",width:24,height:24},dividerIconWrapper:{cursor:"col-resize",opacity:.4,"&:hover":{opacity:1}}})})),Oe=function(t){var n=t.minWidth,l=void 0===n?100:n,r=t.label,o=t.colKey;t.CellComponent,t.HeaderComponent,t.visible;var i=t.sorted,u=t.sortable,s=t.resizable,c=t.colIndex,d=t.classes;t.sticky;var m=t.DividerProps,f=e.__rest(t,["minWidth","label","colKey","CellComponent","HeaderComponent","visible","sorted","sortable","resizable","colIndex","classes","sticky","DividerProps"]),v=He(),g=Ce(),y=L().currentWidths,b=y[f["data-field"]]?y[f["data-field"]]:l;return p.default.createElement(p.default.Fragment,null,p.default.createElement("div",e.__assign({className:h.default(g.tableCell,"HESABA_TABLE_HEADER_CLASS",null==d?void 0:d.root),style:{minWidth:b||l,width:b||l}},f),p.default.createElement(p.default.Fragment,null,p.default.createElement(a.Typography,{align:"center",className:h.default(v.titleText,null==d?void 0:d.title)},r),p.default.createElement(Ve,{index:c,sortable:u,columnKey:o,sorted:i}))),s&&p.default.createElement("div",{className:h.default("HESABA_DRAG_HANDLER",v.dividerIconWrapper)},p.default.createElement(ze,e.__assign({className:h.default(v.dividerIcon,null==d?void 0:d.divider)},m))))},Be=a.makeStyles((function(e){return a.createStyles({headerContainer:{display:"flex",top:0,position:"sticky",zIndex:2,alignItems:"center"},commonHeaderContainer:{backgroundColor:"rgba(255,255,255,0.8)",borderBottom:"solid "+e.palette.grey[300]+" 1px"},titleText:{flex:1},dividerIcon:{pointerEvents:"none",width:24,height:24},dividerIconWrapper:{cursor:"col-resize",opacity:.4,"&:hover":{opacity:1}}})})),Me=function(n){var l=n.selectable,r=n.isSelected,o=n.classes,i=n.width,u=n.CheckboxProps,s=e.__rest(n,["selectable","isSelected","classes","width","CheckboxProps"]),c=Be(),d=Ce(),m=q((function(e){return e.visibleColumns})),f=M((function(e){return e.toggleAllRows})),v=pe(m,i);return p.default.createElement("div",{style:{height:H,width:v()},className:h.default("HESABA_TABLE_ROW_CLASS",c.headerContainer,he(c.commonHeaderContainer,null==o?void 0:o.root))},l&&p.default.createElement(a.Checkbox,e.__assign({className:h.default("HESABA_TABLE_HEADER_CLASS"),checked:r,onChange:function(){f({isSelected:r})},color:"primary",classes:{root:d.checkbox}},u)),m.map((function(n,l){return p.default.createElement(t.Fragment,{key:n.key},p.default.createElement(Oe,e.__assign({},n,s,{colIndex:l,colKey:n.key,classes:null==o?void 0:o.cell})))})))},De=a.makeStyles({root:{}}),qe=t.forwardRef((function(t,n){return p.default.createElement("div",e.__assign({id:"MainVirtualListId"},t,{ref:n}))})),Ke=t.memo(t.forwardRef((function(t,n){var l,a=t.height,o=t.width,i=t.classes,u=t.onScroll,s=t.setTableRef,c=t.extraStyle,d=t.selectable,f=void 0!==d&&d,v=t.itemSize,g=void 0===v?function(){return H}:v,y=t.resizable,b=t.sortable,E=t.VTCommonTableElProps,S=t.VTRowProps,w=t.VTFilterProps,x=t.VTHeaderProps,C=r.useLanguageState().direction,_=q((function(e){return e.visibleRows})),k=q((function(e){return e.numRowsSelected})),R=De();if(!_||0===_.length)return null;return p.default.createElement(m.VariableSizeList,{ref:n,direction:C,height:a,itemCount:_.length,onScroll:u,itemSize:g,itemKey:function(e){return""+e},width:o,itemData:_,outerRef:s,innerElementType:function(t){var n=t.children,l=t.style,r=e.__rest(t,["children","style"]);return p.default.createElement("div",e.__assign({},r,{style:e.__assign(e.__assign({},l),c)}),p.default.createElement(Me,e.__assign({selectable:f,isSelected:0!==k,classes:null==i?void 0:i.header,width:o,resizable:y,sortable:b},E,x,w)),n)},className:h.default(R.root,null===(l=null==i?void 0:i.table)||void 0===l?void 0:l.root),outerElementType:qe},(function(t){var n=t.index,l=e.__rest(t,["index"]);return p.default.createElement(ke,e.__assign({rowIndex:n,selectable:f,classes:null==i?void 0:i.row,width:o},E,S,l))}))}))),je=function(e){var t=e.className;return p.default.createElement(U,{className:t,id:"mdi-chevron-right"},p.default.createElement("path",{d:"M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z"}))},Ze=function(e){var t=e.className;return p.default.createElement(U,{className:t,id:"mdi-chevron-left"},p.default.createElement("path",{d:"M15.41,16.58L10.83,12L15.41,7.41L14,6L8,12L14,18L15.41,16.58Z"}))},Xe=a.makeStyles((function(e){return a.createStyles({paginationRoot:{display:"flex",width:"100%",border:0,flexWrap:"wrap",borderTop:"solid 1px "+e.palette.grey[300],alignItems:"center",justifyContent:"space-between"},actions:{flexShrink:0,marginLeft:20},toolbar:{minHeight:52,paddingRight:2},spacer:{flex:"1 1 100%"},caption:{flexShrink:0},selectRoot:{fontFamily:"inherit"},selectRootLTR:{marginRight:32,marginLeft:8},selectRootRTL:{marginRight:8,marginLeft:32},select:{paddingLeft:8,paddingRight:24,textAlign:"right",textAlignLast:"right"},selectIcon:{},input:{color:"inherit",fontSize:"inherit",flexShrink:0},menuItem:{},selectContainer:{display:"flex"}})}));function Ge(e){var t=e.page,n=e.onPageChange,l=e.count,a=e.rowsPerPage,o=r.useTranslation().t;return p.default.createElement("div",{style:{display:"flex",direction:"ltr"}},p.default.createElement(r.ButtonTooltip,{title:null==o?void 0:o.prev,onClick:function(e){n(e,t-1)},disabled:0===t,color:"inherit"},p.default.createElement(Ze,null)),p.default.createElement(r.ButtonTooltip,{title:null==o?void 0:o.next,onClick:function(e){n(e,t+1)},disabled:-1!==l&&t>=Math.ceil(l/a)-1,color:"inherit"},p.default.createElement(je,null)))}function Ue(t){var n,l,o=t.classes,i=t.width,u=t.rowsPerPageOptions,s=void 0===u?[10,25,50,100]:u,c=t.page,d=t.count,m=t.rowsPerPage,f=t.onRowsPerPageChange,v=t.height,g=e.__rest(t,["classes","width","rowsPerPageOptions","page","count","rowsPerPage","onRowsPerPageChange","height"]),y=Xe(),b=r.useTranslation().t,E=r.useLanguageState().direction,S=q((function(e){return e.numRowsSelected}));return p.default.createElement("div",{className:h.default(y.paginationRoot,null==o?void 0:o.root),style:{width:i,direction:E,height:v||70}},p.default.createElement(a.Toolbar,{className:y.toolbar},p.default.createElement("div",{className:y.spacer}),p.default.createElement(r.WithFontTypography,{color:"inherit",variant:"body2",className:y.caption},null==b?void 0:b.rowPerPage),p.default.createElement(a.Select,{classes:{select:y.select,icon:y.selectIcon},input:p.default.createElement(a.InputBase,{className:h.default(h.default(y.input,y.selectRoot,(n={},n[y.selectRootLTR]="ltr"===E,n),(l={},l[y.selectRootRTL]="ltr"!==E,l)))}),value:m,onChange:f},s.map((function(e){return p.default.createElement(a.MenuItem,{className:y.menuItem,key:e,value:e},e)}))),p.default.createElement(r.WithFontTypography,{color:"inherit",variant:"body2",className:y.caption},function(e){var t=e.from,n=e.to,l=e.count,a=r.useTranslation().t;return t+"-"+n+" "+(null==a?void 0:a.of)+" "+(-1!==l?l:""+(null==a?void 0:a.moreThan)+n)}({from:0===d?0:c*m+1,to:-1===d?(c+1)*m:-1===m?d:Math.min(d,(c+1)*m),count:-1===d?-1:d})),p.default.createElement(Ge,e.__assign({},g))),S>0&&p.default.createElement(r.WithFontTypography,null,S," ",b.rowSelected))}function Ye(e,t,n,l){if(!e&&!n)return l;var r=l;return n&&((null==n?void 0:n.height)?r-=null==n?void 0:n.height:r-=70),e&&(r-=t||70),r}var Je=t.memo((function(n){var l,r=n.rows,a=n.columns,o=n.width,i=void 0===o?"100%":o,u=n.height,s=n.hasFilter,c=void 0===s||s,d=n.hasToolbar,m=void 0===d||d,f=n.title,v=n.operationOnRows,h=n.classes,g=n.pagination,y=n.tableDataParser,b=n.VTContainerProps,E=n.VTToolbarProps,S=e.__rest(n,["rows","columns","width","height","hasFilter","hasToolbar","title","operationOnRows","classes","pagination","tableDataParser","VTContainerProps","VTToolbarProps"]);!function(e,n,l){var r=M((function(e){return e.setTableData}));t.useEffect((function(){r(l?l(e,n):X(e,n))}),[e,n,l])}(a,r,y);var w=O().setTableRef,x=t.useRef(),C=t.useRef(),_=t.useCallback((function(e){var t=e.scrollOffset;!e.scrollUpdateWasRequested&&x.current&&x.current.scrollTo(t)}),[]);return p.default.createElement(ye,e.__assign({classes:null==h?void 0:h.table},b,{width:i}),m&&p.default.createElement(Q,e.__assign({title:f,operationOnRows:v,classes:null==h?void 0:h.toolbar},E)),p.default.createElement("div",{role:"table",className:null===(l=null==h?void 0:h.table)||void 0===l?void 0:l.container,style:{display:"flex"}},p.default.createElement(be,null),p.default.createElement(Ke,e.__assign({ref:C,width:i,onScroll:_,classes:h,setTableRef:w,height:Ye(m,null==E?void 0:E.height,g,u)},S)),p.default.createElement(be,null)),c&&p.default.createElement(ve,null),g&&p.default.createElement(Ue,e.__assign({},g,{classes:null==h?void 0:h.footer,width:i})))}));exports.AutoSizer=function(e){var t=e.className,n=e.width,l=e.height,r=e.children,a=e.onResize,o="number"==typeof n,i="number"==typeof l;return o&&i?p.default.createElement("div",{className:t,style:{width:n,height:l,position:"relative"}},r({width:n,height:l})):p.default.createElement(E.default,{className:t,disableWidth:o,disableHeight:i,onResize:a},r)},exports.HesabaVirtualTable=function(t){var n=t.direction,l=t.language,r=t.theme,a=e.__rest(t,["direction","language","theme"]);return p.default.createElement(V,null,p.default.createElement(z,{direction:n,language:l,theme:r},p.default.createElement(Je,e.__assign({},a))))},exports.MAIN_LIST_ID="MainVirtualListId",exports.Provider=z,exports.TableRowProvider=W,exports.TableSizeProvider=I,exports.TableStoreProvider=V,exports.TableToolbar=Q,exports.ToolbarMoreVert=$,exports.ToolbarOperation=ee,exports.VirtualTableContainer=ye,exports.createEnhancedColumns=j,exports.createEnhancedRows=Z,exports.parseTableData=X,exports.useStore=K,exports.useStoreDispatch=D,exports.useTStoreActions=M,exports.useTStoreState=q,exports.useTableRowAction=function(){var e=t.useContext(N);if(!e)throw Error("use state inside provider");return e},exports.useTableRowState=F,exports.useTableSizeAction=A,exports.useTableSizeState=L;
//# sourceMappingURL=index.js.map
